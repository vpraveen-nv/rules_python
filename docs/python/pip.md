
<!---
Documentation generated by Skydoc
-->
<h1>Import pip requirements into Bazel.</h1>


<nav class="toc">
  <h2>Repository Rules</h2>
  <ul>
    <li><a href="#pip_import">pip_import</a></li>
    <li><a href="#pip_version_proxy">pip_version_proxy</a></li>
  </ul>
  <h2>Macros</h2>
  <ul>
    <li><a href="#pip_repositories">pip_repositories</a></li>
  </ul>
</nav>
<a name="pip_repositories"></a>
## pip_repositories

<pre>
pip_repositories()
</pre>

Pull in dependencies needed for pulling in pip dependencies.

A placeholder method that will eventually pull in any dependencies
needed to install pip dependencies.

<a name="pip_import"></a>
## pip_import

<pre>
pip_import(<a href="#pip_import.name">name</a>, <a href="#pip_import.additional_buildtime_deps">additional_buildtime_deps</a>, <a href="#pip_import.additional_runtime_deps">additional_runtime_deps</a>, <a href="#pip_import.pip_args">pip_args</a>, <a href="#pip_import.python">python</a>, <a href="#pip_import.remove_runtime_deps">remove_runtime_deps</a>, <a href="#pip_import.requirements">requirements</a>, <a href="#pip_import.requirements_bzl">requirements_bzl</a>)
</pre>

A rule for importing <code>requirements.txt</code> dependencies into Bazel.

This rule imports a <code>requirements.txt</code> file and generates a new
<code>requirements.bzl</code> file.  This is used via the <code>WORKSPACE</code>
pattern:
<pre><code>pip_import(
    name = "foo",
    requirements = ":requirements.txt",
)
load("@foo//:requirements.bzl", "pip_install")
pip_install()
</code></pre>

You can then reference imported dependencies from your <code>BUILD</code>
file with:
<pre><code>load("@foo//:requirements.bzl", "requirement")
py_library(
    name = "bar",
    ...
    deps = [
       "//my/other:dep",
       requirement("futures"),
       requirement("mock"),
    ],
)
</code></pre>

Or alternatively:
<pre><code>load("@foo//:requirements.bzl", "all_requirements")
py_binary(
    name = "baz",
    ...
    deps = [
       ":foo",
    ] + all_requirements,
)
</code></pre>


<a name="pip_import_args"></a>
### Attributes


<table class="params-table">
  <colgroup>
    <col class="col-param" />
    <col class="col-description" />
  </colgroup>
  <tbody>
    <tr id="pip_import.name">
      <td><code>name</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#name">Name</a>; Required</code></p>
        <p>A unique name for this rule.</p>
      </td>
    </tr>
    <tr id="pip_import.additional_buildtime_deps">
      <td><code>additional_buildtime_deps</code></td>
      <td>
        <p><code>Dictionary mapping strings to lists of strings; Optional; Default is {}</code></p>
        
      </td>
    </tr>
    <tr id="pip_import.additional_runtime_deps">
      <td><code>additional_runtime_deps</code></td>
      <td>
        <p><code>Dictionary mapping strings to lists of strings; Optional; Default is {}</code></p>
        
      </td>
    </tr>
    <tr id="pip_import.pip_args">
      <td><code>pip_args</code></td>
      <td>
        <p><code>List of strings; Optional; Default is []</code></p>
        
      </td>
    </tr>
    <tr id="pip_import.python">
      <td><code>python</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#labels">Label</a>; Optional</code></p>
        
      </td>
    </tr>
    <tr id="pip_import.remove_runtime_deps">
      <td><code>remove_runtime_deps</code></td>
      <td>
        <p><code>Dictionary mapping strings to lists of strings; Optional; Default is {}</code></p>
        
      </td>
    </tr>
    <tr id="pip_import.requirements">
      <td><code>requirements</code></td>
      <td>
        <p><code>List of <a href="https://bazel.build/docs/build-ref.html#labels">labels</a>; Required</code></p>
        <p>The label of a requirements.txt file.</p>
      </td>
    </tr>
    <tr id="pip_import.requirements_bzl">
      <td><code>requirements_bzl</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#labels">Label</a>; Optional</code></p>
        
      </td>
    </tr>
  </tbody>
</table>
<a name="pip_version_proxy"></a>
## pip_version_proxy

<pre>
pip_version_proxy(<a href="#pip_version_proxy.name">name</a>, <a href="#pip_version_proxy.define">define</a>, <a href="#pip_version_proxy.python">python</a>, <a href="#pip_version_proxy.values">values</a>)
</pre>

A rule for proxying requirements between different python runtimes.

This rule generates a <code>requirements.bzl</code> file that provides
a <code>requirements()</code> function that resolves to the correct version
of python dependencies depending on the current python runtime.
This is used via the <code>WORKSPACE</code> pattern:

<pre><code>pip_import(
    name = "pip_deps2",
    requirements = ["//:requirements-pip.txt"],
    python = "@python2//:bin/python",
)
pip_import(
    name = "pip_deps3",
    requirements = ["//:requirements-pip.txt"],
    python = "@python3//:bin/python",
)
load("@pip_deps2//:requirements.bzl", pip_install2 = "pip_install")
pip_install2()
load("@pip_deps3//:requirements.bzl", pip_install3 = "pip_install")
pip_install3()

pip_version_proxy(
    name = "pip_deps",
    define = "python",
    values = {
        "py2": "@pip_deps2",
        "py3": "@pip_deps3",
    },
)
</code></pre>

When importing dependencies from a <code>BUILD</code> file with

<pre><code>load("@pip_deps//:requirements.bzl", "requirement")
py_library(
    name = "bar",
    ...
    deps = [
       requirement("mock"),
    ],
)
</code></pre>

the <code>requirement</code> macro will resolve to <code>pip_deps2</code> when
building with <code>--define python=py2</code>, and to <code>pip_deps3</code> when
building with <code>--define python=py3</code>.


<a name="pip_version_proxy_args"></a>
### Attributes


<table class="params-table">
  <colgroup>
    <col class="col-param" />
    <col class="col-description" />
  </colgroup>
  <tbody>
    <tr id="pip_version_proxy.name">
      <td><code>name</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#name">Name</a>; Required</code></p>
        <p>A unique name for this rule.</p>
      </td>
    </tr>
    <tr id="pip_version_proxy.define">
      <td><code>define</code></td>
      <td>
        <p><code>String; Optional; Default is ''</code></p>
        <p>The key of the &lt;code&gt;--define&lt;/code&gt; that selects the python version.</p>
      </td>
    </tr>
    <tr id="pip_version_proxy.python">
      <td><code>python</code></td>
      <td>
        <p><code><a href="https://bazel.build/docs/build-ref.html#labels">Label</a>; Optional</code></p>
        
      </td>
    </tr>
    <tr id="pip_version_proxy.values">
      <td><code>values</code></td>
      <td>
        <p><code>Dictionary mapping strings to string; Optional; Default is {}</code></p>
        <p>For each item in the dict, the key is the value of the &lt;code&gt;--define&lt;/code&gt; to match,
and the value is the name of the pip_import repository rule that provides
the pip dependencies for that python runtime.</p>
      </td>
    </tr>
  </tbody>
</table>
